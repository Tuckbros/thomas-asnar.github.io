<link rel="import" href="boot.6740db3f.html"><link rel="import" href="async.506c0c6a.html"><link rel="import" href="debounce.459c68e4.html"><script>!function(){"use strict";let e="string"==typeof document.head.style.touchAction,t="__polymerGesturesHandled",n="__polymerGesturesTouchAction",o=2500,i=["mousedown","mousemove","mouseup","click"],s=[0,1,4,2],r=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}(),u=!1;!function(){try{let e=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let c=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),f=function(e){let n=e.sourceCapabilities;if((!n||n.firesTouchEvents)&&(e[t]={skip:!0},"click"===e.type)){let t=e.composedPath&&e.composedPath();if(t)for(let e=0;e<t.length;e++)if(t[e]===l.mouse.target)return;e.preventDefault(),e.stopPropagation()}};function a(e){let t=c?["click"]:i;for(let n,o=0;o<t.length;o++)n=t[o],e?document.addEventListener(n,f,!0):document.removeEventListener(n,f,!0)}function h(e){let t=e.type;if(-1===i.indexOf(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!r&&(t=s[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let l={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function d(e,t,n){e.movefn=t,e.upfn=n,document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}function m(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",function(e){l.mouse.mouseIgnoreJob||a(!0),l.mouse.target=e.composedPath()[0],l.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(l.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(o),function(){a(),l.mouse.target=null,l.mouse.mouseIgnoreJob=null})},!!u&&{passive:!0});const v={gestures:{},recognizers:[],deepTargetFind:function(e,t){let n=document.elementFromPoint(e,t),o=n;for(;o&&o.shadowRoot&&!window.ShadyDOM;){if(o===(o=o.shadowRoot.elementFromPoint(e,t)))break;o&&(n=o)}return n},_findOriginalTarget:function(e){return e.composedPath?e.composedPath()[0]:e.target},_handleNative:function(n){let o,i=n.type,s=n.currentTarget.__polymerGestures;if(!s)return;let r=s[i];if(!r)return;if(!n[t]&&(n[t]={},"touch"===i.slice(0,5))){let t=n.changedTouches[0];if("touchstart"===i&&1===n.touches.length&&(l.touch.id=t.identifier),l.touch.id!==t.identifier)return;e||"touchstart"!==i&&"touchmove"!==i||v._handleTouchAction(n)}if((o=n[t]).skip)return;let u=v.recognizers;for(let e,t=0;t<u.length;t++)r[(e=u[t]).name]&&!o[e.name]&&e.flow&&e.flow.start.indexOf(n.type)>-1&&e.reset&&e.reset();for(let e,t=0;t<u.length;t++)r[(e=u[t]).name]&&!o[e.name]&&(o[e.name]=!0,e[i](n))},_handleTouchAction:function(e){let t=e.changedTouches[0],o=e.type;if("touchstart"===o)l.touch.x=t.clientX,l.touch.y=t.clientY,l.touch.scrollDecided=!1;else if("touchmove"===o){if(l.touch.scrollDecided)return;l.touch.scrollDecided=!0;let o=function(e){let t="auto",o=e.composedPath&&e.composedPath();if(o)for(let e,i=0;i<o.length;i++)if((e=o[i])[n]){t=e[n];break}return t}(e),i=!1,s=Math.abs(l.touch.x-t.clientX),r=Math.abs(l.touch.y-t.clientY);e.cancelable&&("none"===o?i=!0:"pan-x"===o?i=r>s:"pan-y"===o&&(i=s>r)),i?e.preventDefault():v.prevent("track")}},addListener:function(e,t,n){if(this.gestures[t])return this._add(e,t,n),!0},removeListener:function(e,t,n){if(this.gestures[t])return this._remove(e,t,n),!0},_add:function(e,t,n){let o=this.gestures[t],s=o.deps,r=o.name,u=e.__polymerGestures;u||(e.__polymerGestures=u={});for(let t,n,o=0;o<s.length;o++)t=s[o],c&&i.indexOf(t)>-1&&"click"!==t||((n=u[t])||(u[t]=n={_count:0}),0===n._count&&e.addEventListener(t,this._handleNative),n[r]=(n[r]||0)+1,n._count=(n._count||0)+1);e.addEventListener(t,n),o.touchAction&&this.setTouchAction(e,o.touchAction)},_remove:function(e,t,n){let o=this.gestures[t],i=o.deps,s=o.name,r=e.__polymerGestures;if(r)for(let t,n,o=0;o<i.length;o++)(n=r[t=i[o]])&&n[s]&&(n[s]=(n[s]||1)-1,n._count=(n._count||1)-1,0===n._count&&e.removeEventListener(t,this._handleNative));e.removeEventListener(t,n)},register:function(e){this.recognizers.push(e);for(let t=0;t<e.emits.length;t++)this.gestures[e.emits[t]]=e},_findRecognizerByEvent:function(e){for(let t,n=0;n<this.recognizers.length;n++){t=this.recognizers[n];for(let n,o=0;o<t.emits.length;o++)if((n=t.emits[o])===e)return t}return null},setTouchAction:function(t,o){e&&(t.style.touchAction=o),t[n]=o},_fire:function(e,t,n){let o=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(o.detail=n,e.dispatchEvent(o),o.defaultPrevented){let e=n.preventer||n.sourceEvent;e&&e.preventDefault&&e.preventDefault()}},prevent:function(e){let t=this._findRecognizerByEvent(e);t.info&&(t.info.prevent=!0)},resetMouseCanceller:function(){l.mouse.mouseIgnoreJob&&l.mouse.mouseIgnoreJob.flush()}};v.register({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){m(this.info)},mousedown:function(e){if(!h(e))return;let t=v._findOriginalTarget(e),n=this;d(this.info,function(e){h(e)||(n._fire("up",t,e),m(n.info))},function(e){h(e)&&n._fire("up",t,e),m(n.info)}),this._fire("down",t,e)},touchstart:function(e){this._fire("down",v._findOriginalTarget(e),e.changedTouches[0],e)},touchend:function(e){this._fire("up",v._findOriginalTarget(e),e.changedTouches[0],e)},_fire:function(e,t,n,o){v._fire(t,e,{x:n.clientX,y:n.clientY,sourceEvent:n,preventer:o,prevent:function(e){return v.prevent(e)}})}}),v.register({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,m(this.info)},hasMovedEnough:function(e,t){if(this.info.prevent)return!1;if(this.info.started)return!0;let n=Math.abs(this.info.x-e),o=Math.abs(this.info.y-t);return n>=5||o>=5},mousedown:function(e){if(!h(e))return;let t=v._findOriginalTarget(e),n=this,o=function(e){let o=e.clientX,i=e.clientY;n.hasMovedEnough(o,i)&&(n.info.state=n.info.started?"mouseup"===e.type?"end":"track":"start","start"===n.info.state&&v.prevent("tap"),n.info.addMove({x:o,y:i}),h(e)||(n.info.state="end",m(n.info)),n._fire(t,e),n.info.started=!0)};d(this.info,o,function(e){n.info.started&&o(e),m(n.info)}),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=v._findOriginalTarget(e),n=e.changedTouches[0],o=n.clientX,i=n.clientY;this.hasMovedEnough(o,i)&&("start"===this.info.state&&v.prevent("tap"),this.info.addMove({x:o,y:i}),this._fire(t,n),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=v._findOriginalTarget(e),n=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:n.clientX,y:n.clientY}),this._fire(t,n,e))},_fire:function(e,t){let n,o=this.info.moves[this.info.moves.length-2],i=this.info.moves[this.info.moves.length-1],s=i.x-this.info.x,r=i.y-this.info.y,u=0;return o&&(n=i.x-o.x,u=i.y-o.y),v._fire(e,"track",{state:this.info.state,x:t.clientX,y:t.clientY,dx:s,dy:r,ddx:n,ddy:u,sourceEvent:t,hover:function(){return v.deepTargetFind(t.clientX,t.clientY)}})}}),v.register({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(e){this.info.x=e.clientX,this.info.y=e.clientY},mousedown:function(e){h(e)&&this.save(e)},click:function(e){h(e)&&this.forward(e)},touchstart:function(e){this.save(e.changedTouches[0],e)},touchend:function(e){this.forward(e.changedTouches[0],e)},forward:function(e,t){let n=Math.abs(e.clientX-this.info.x),o=Math.abs(e.clientY-this.info.y),i=v._findOriginalTarget(e);(isNaN(n)||isNaN(o)||n<=25&&o<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=v._findOriginalTarget(e);if(t.nodeType!==Node.ELEMENT_NODE)return!0;let n=t.getBoundingClientRect(),o=e.pageX,i=e.pageY;return!(o>=n.left&&o<=n.right&&i>=n.top&&i<=n.bottom)}return!1}(e))&&(this.info.prevent||v._fire(i,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:t}))}}),v.findOriginalTarget=v._findOriginalTarget,v.add=v.addListener,v.remove=v.removeListener,Polymer.Gestures=v}();</script>